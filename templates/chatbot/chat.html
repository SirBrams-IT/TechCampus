{% extends base_template %}
{% load static %}
{% block content %}

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<!-- FontAwesome (optional, for plus icon) -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="{% static 'chatbot/style.css' %}">

<div class="chat-layout">
  <!-- SIDEBAR -->
  <aside class="sidebars">
    <div class="logo-sections">
      <h2>ðŸ¤– SirBrams AI</h2>
      <p class="tagline">AI Chatbot</p>
    </div>

    <button id="btnNewChat" class="new-chat-btn">
      <i class="bi bi-plus text-white"></i> New Chat
    </button>

    <div id="chatSessions" class="chat-sessions">Loading...</div>

    <!-- Footer icon -->
    <div class="sidebar-footer">
      <i class="bi bi-cog text-primary" title="Settings"></i>
    </div>
  </aside>

  <!-- MAIN CHAT -->
  <main class="chat-container">
    <header class="chat-header d-flex align-items-center p-2">
  <h2 class="d-flex align-items-center m-0">
    <img src="
    {% if admininfo.profile_image and admininfo.profile_image.url %}
      {{ admininfo.profile_image.url }}
    {% elif studentinfo.profile_image and studentinfo.profile_image.url %}
      {{ studentinfo.profile_image.url }}
    {% else %}
      {% static 'asset/img/profile.jpeg' %}
    {% endif %}
    "
    alt="Profile" class="rounded-circle profile-img me-2" width="45" height="45">
    <span class="fw-semibold text-black">Hello, <b class="text-primary">{{ username|capfirst }}! </b></span>
  </h2>
</header>


    <div class="messages-container" id="messagesContainer">
      <!-- Dynamic messages appear here -->
    </div>

    <div class="input-container">
      <div class="input-group">
        <input type="text" id="userInput" placeholder="Type your message..." autocomplete="off">
        <div class="input-actions">
          <label for="fileInput" title="Attach file"><i class="bi bi-paperclip text-black"></i></label>
          <input id="fileInput" type="file" hidden>
          <button id="audioBtn" title="Voice Input"><i class="bi bi-mic-fill text-black"></i></button>
          <button id="sendBtn" title="Send"><i class="bi bi-send-fill text-black"></i></button>
        </div>
      </div>

      <div class="suggestions">
        <span class="text-primary">Try:</span>
        <button class="suggestion-btn" onclick="fillSuggestion('How do I start with Django?')">Django</button>
        <button class="suggestion-btn" onclick="fillSuggestion('Explain REST APIs')">REST APIs</button>
      </div>
    </div>
  </main>
</div>

<script src="{% static 'chatbot/script.js' %}"></script>

<script>
  // Clear input after send
  document.getElementById('sendBtn').addEventListener('click', function() {
    const input = document.getElementById('userInput');
    if (input.value.trim() !== '') {
      // Simulate sending (you can call your sendMessage() function here)
      input.value = ''; // clear input
    }
  });
</script>

{% endblock %}
