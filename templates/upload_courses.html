<br><br><br><br>
{% extends 'admin_main.html'%}
{% load static%}
{% block content%}

<div class="container-fluid py-4">
    <div class="row justify-content-center">
        <div class="col-11 col-lg-10 col-xl-9">
            <div class="card shadow-lg mb-4">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center py-3">
                    <h4 class="mb-0">Course Content Management</h4>
                    <button class="btn btn-light" data-bs-toggle="modal" data-bs-target="#newCourseModal">
                        <i class="fas fa-plus me-2"></i>New Course
                    </button>
                </div>
                <div class="card-body">
                    <!-- Course Selection -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <label for="courseSelect" class="form-label fw-bold">Select Course</label>
                            <select class="form-select" id="courseSelect">
                                <option value="" selected disabled>-- Choose a course --</option>
                                <option value="WD111">Web Development (WD111)</option>
                                <option value="AD111">Android Development (AD111)</option>
                                <option value="IT111">IT Support (IT111)</option>
                                <option value="GD111">Graphic Design (GD111)</option>
                                <option value="CS111">Cybersecurity (CS111)</option>
                                <option value="AE111">Advanced Excel (AE111)</option>
                                <option value="CCTV111">CCTV Installation (CCTV111)</option>
                                <option value="PMS111">Project Management System (PMS111)</option>
                                <option value="AI111">AI (AI111)</option>
                                <option value="CC111">Cloud Computing (CC111)</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">Course Actions</label>
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-primary flex-fill" data-bs-toggle="modal" data-bs-target="#editCourseModal">
                                    <i class="fas fa-edit me-1"></i> Edit Course
                                </button>
                                <button class="btn btn-outline-danger flex-fill">
                                    <i class="fas fa-trash me-1"></i> Delete Course
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Module Management -->
                    <div class="card mb-4">
                        <div class="card-header bg-light d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Modules</h5>
                            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#newModuleModal">
                                <i class="fas fa-plus me-1"></i> Add Module
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="modules-container">
                                <div class="alert alert-info">
                                    Select a course to view and manage its modules
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lesson Management -->
                    <div class="card">
                        <div class="card-header bg-light d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Lessons</h5>
                            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#newLessonModal">
                                <i class="fas fa-plus me-1"></i> Add Lesson
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="lessons-container">
                                <div class="alert alert-info">
                                    Select a module to view and manage its lessons
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- New Course Modal -->
<div class="modal fade" id="newCourseModal" tabindex="-1" aria-labelledby="newCourseModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="newCourseModalLabel">Create New Course</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="newCourseForm">
                    <div class="mb-3">
                        <label for="courseTitle" class="form-label">Course Title</label>
                        <input type="text" class="form-control" id="courseTitle" required>
                    </div>
                    <div class="mb-3">
                        <label for="courseCode" class="form-label">Course Code</label>
                        <select class="form-select" id="courseCode" required>
                            <option value="" selected disabled>-- Select Course Code --</option>
                            <option value="WD111">WD111 - Web Development</option>
                            <option value="AD111">AD111 - Android Development</option>
                            <option value="IT111">IT111 - IT Support</option>
                            <option value="GD111">GD111 - Graphic Design</option>
                            <option value="CS111">CS111 - Cybersecurity</option>
                            <option value="AE111">AE111 - Advanced Excel</option>
                            <option value="CCTV111">CCTV111 - CCTV Installation</option>
                            <option value="PMS111">PMS111 - Project Management System</option>
                            <option value="AI111">AI111 - AI</option>
                            <option value="CC111">CC111 - Cloud Computing</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="courseDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="courseDescription" rows="4" required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Create Course</button>
            </div>
        </div>
    </div>
</div>

<!-- New Module Modal -->
<div class="modal fade" id="newModuleModal" tabindex="-1" aria-labelledby="newModuleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="newModuleModalLabel">Add New Module</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="newModuleForm">
                    <div class="mb-3">
                        <label for="moduleTitle" class="form-label">Module Title</label>
                        <input type="text" class="form-control" id="moduleTitle" required>
                    </div>
                    <div class="mb-3">
                        <label for="moduleOrder" class="form-label">Order</label>
                        <input type="number" class="form-control" id="moduleOrder" min="1" value="1" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Add Module</button>
            </div>
        </div>
    </div>
</div>

<!-- New Lesson Modal -->
<div class="modal fade" id="newLessonModal" tabindex="-1" aria-labelledby="newLessonModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="newLessonModalLabel">Add New Lesson</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="newLessonForm">
                    <div class="mb-3">
                        <label for="lessonTitle" class="form-label">Lesson Title</label>
                        <input type="text" class="form-control" id="lessonTitle" required>
                    </div>
                    <div class="mb-3">
                        <label for="lessonOrder" class="form-label">Order</label>
                        <input type="number" class="form-control" id="lessonOrder" min="1" value="1" required>
                    </div>
                    <div class="mb-3">
                        <label for="lessonContent" class="form-label">Content</label>
                        <textarea class="form-control" id="lessonContent" rows="4"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="lessonVideo" class="form-label">Video Upload</label>
                        <input class="form-control" type="file" id="lessonVideo" accept="video/*">
                    </div>
                    <div class="mb-3">
                        <label for="lessonResource" class="form-label">Resource File</label>
                        <input class="form-control" type="file" id="lessonResource">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Add Lesson</button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Course Modal -->
<div class="modal fade" id="editCourseModal" tabindex="-1" aria-labelledby="editCourseModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="editCourseModalLabel">Edit Course</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editCourseForm">
                    <div class="mb-3">
                        <label for="editCourseTitle" class="form-label">Course Title</label>
                        <input type="text" class="form-control" id="editCourseTitle" required>
                    </div>
                    <div class="mb-3">
                        <label for="editCourseCode" class="form-label">Course Code</label>
                        <input type="text" class="form-control" id="editCourseCode" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="editCourseDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="editCourseDescription" rows="4" required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Sample data for demonstration
        const sampleModules = [
            { id: 1, title: "Introduction to HTML", order: 1, lessons: [
                { id: 1, title: "What is HTML?", order: 1, hasVideo: true, hasResource: false },
                { id: 2, title: "Basic HTML Structure", order: 2, hasVideo: true, hasResource: true }
            ]},
            { id: 2, title: "CSS Fundamentals", order: 2, lessons: [
                { id: 3, title: "CSS Selectors", order: 1, hasVideo: true, hasResource: true },
                { id: 4, title: "Box Model", order: 2, hasVideo: false, hasResource: true }
            ]}
        ];
        
        const courseSelect = document.getElementById('courseSelect');
        
        // When a course is selected
        courseSelect.addEventListener('change', function() {
            const courseCode = this.value;
            loadCourseContent(courseCode);
        });
        
        function loadCourseContent(courseCode) {
            // In a real application, you would fetch this data from the server
            // For demonstration, we're using sample data
            
            // Render modules
            const modulesContainer = document.querySelector('.modules-container');
            modulesContainer.innerHTML = '';
            
            if (sampleModules.length === 0) {
                modulesContainer.innerHTML = `
                    <div class="alert alert-warning">
                        No modules found for this course. Click "Add Module" to create one.
                    </div>
                `;
                return;
            }
            
            sampleModules.forEach(module => {
                const moduleElement = document.createElement('div');
                moduleElement.className = 'module-card card mb-3';
                moduleElement.innerHTML = `
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <span class="drag-handle me-3"><i class="fas fa-bars"></i></span>
                                <h5 class="mb-0">${module.title}</h5>
                                <span class="badge bg-secondary ms-3">Order: ${module.order}</span>
                            </div>
                            <div class="module-actions">
                                <button class="btn btn-sm btn-outline-primary me-1">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mt-3 lessons-list">
                            ${module.lessons.length > 0 ? 
                                module.lessons.map(lesson => `
                                    <div class="lesson-card card mb-2">
                                        <div class="card-body py-2">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="d-flex align-items-center">
                                                    <span class="drag-handle me-3"><i class="fas fa-bars"></i></span>
                                                    <h6 class="mb-0">${lesson.title}</h6>
                                                    <span class="badge bg-secondary ms-2">Order: ${lesson.order}</span>
                                                    ${lesson.hasVideo ? '<span class="badge bg-info ms-1"><i class="fas fa-video"></i></span>' : ''}
                                                    ${lesson.hasResource ? '<span class="badge bg-warning ms-1"><i class="fas fa-file"></i></span>' : ''}
                                                </div>
                                                <div class="lesson-actions">
                                                    <button class="btn btn-sm btn-outline-primary me-1">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `).join('') : 
                                '<div class="text-muted mt-2">No lessons in this module</div>'
                            }
                        </div>
                    </div>
                `;
                modulesContainer.appendChild(moduleElement);
            });
        }
        
        // Initialize sortable functionality (would need a library like SortableJS in a real implementation)
    });
</script>

{% endblock%}